## ç›®å½•

* [1. å‰ç«¯é”™è¯¯/å¼‚å¸¸](#1. å‰ç«¯é”™è¯¯/å¼‚å¸¸)
* [2. JavaScript å¦‚ä½•å·¥ä½œï¼šå¯¹å¼•æ“ã€è¿è¡Œæ—¶ã€è°ƒç”¨å †æ ˆçš„æ¦‚è¿°](#2. JavaScriptå¦‚ä½•å·¥ä½œï¼šå¯¹å¼•æ“ã€è¿è¡Œæ—¶ã€è°ƒç”¨å †æ ˆçš„æ¦‚è¿°)
* [](#)
* [](#)

### 1. å‰ç«¯é”™è¯¯/å¼‚å¸¸

##### 1.1 é”™è¯¯ç±»å‹

1ï¼‰ECMAScript exceptions

> å°±æ˜¯åœ¨ javascript æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯ï¼Œæ¯ä¸€ç§é”™è¯¯éƒ½æœ‰å¯¹åº”çš„é”™è¯¯ç±»å‹ã€‚å½“é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå°±ä¼šæŠ›å‡ºç›¸åº”çš„é”™è¯¯ç±»å‹ã€‚

* Error

> JavaScript åŸç”Ÿæä¾› Error æ„é€ å‡½æ•°ï¼Œæ‰€æœ‰æŠ›å‡ºçš„é”™è¯¯éƒ½æ˜¯è¿™ä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ã€‚Error æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºé”™è¯¯æç¤ºï¼Œå¯ä»¥ä»å®ä¾‹çš„ message å±æ€§è¯»åˆ°è¿™ä¸ªå‚æ•°ã€‚

``` javascript
var err = new Error('throw error');
err.message // 'throw error'
```

* EvalError

> eveal() çš„ä½¿ç”¨ä¸å®šä¹‰ä¸ä¸€è‡´ã€‚

* RangeError

> æ•°å€¼è¶Šç•Œã€‚

* ReferenceError

> è®¿é—®æœªç»å£°æ˜æˆ–è€…ä¸å­˜åœ¨çš„å˜é‡æ—¶æ‰€è§¦å‘çš„é”™è¯¯ã€‚

* SyntaxError

> å‡ºç°è¯­æ³•è§£æé”™è¯¯æ—¶

* TypeError

> æ“ä½œæ•°ç±»å‹é”™è¯¯ï¼Œåœ¨ä¸æ°å½“çš„æ•°æ®ç±»å‹å˜é‡ä¸Šæ‰§è¡Œä¸æ°å½“çš„æ“ä½œæ—¶ã€‚

* URIError

> endodeURI() æˆ–è€… decodeURI()ï¼Œå½“ä¼ å…¥çš„å­—ç¬¦ URL æ ¼å¼ä¸å¯¹æ—¶ã€‚

2ï¼‰ç½‘ç»œé™æ€èµ„æºåŠ è½½é”™è¯¯

> å¸¸è§çš„ç½‘ç»œé™æ€èµ„æºåŒ…æ‹¬ï¼šhtml æ–‡ä»¶ï¼Œcss æ–‡ä»¶ï¼Œjavascript æ–‡ä»¶ï¼Œå›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œiframe ç­‰ç­‰ã€‚æ‰€æœ‰çš„ç½‘ç»œé™æ€èµ„æºéƒ½æœ‰å¯èƒ½é‡åˆ°åŠ è½½é”™è¯¯è¿™ä¸ªé—®é¢˜ã€‚

##### 1.2 é”™è¯¯å¤„ç†

1ï¼‰tryÂ·Â·Â·catch

> å¯¹å¯èƒ½å‘ç”Ÿçš„é”™è¯¯è¿›è¡Œå¼‚å¸¸æ•è·ï¼Œä¿è¯åé¢çš„ä»£ç æ­£å¸¸è¿è¡Œã€‚

> åªèƒ½æ•è·åˆ°åŒæ­¥ä»£ç å¼‚å¸¸ï¼Œä¸”å‡ºé”™çš„åŒæ­¥ä»£ç æ˜¯å¦ä¼šå½±å“å…¶ä»–çš„ä»£ç æ‰§è¡Œï¼ˆä¸ç®¡åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼‰å–å†³äºåŒæ­¥ä»£ç çš„ä¹¦å†™æœŸè€Œä¸æ˜¯æ‰§è¡ŒæœŸã€‚ä¸èƒ½æ•è·è¯­æ³•é”™è¯¯å’Œå¼‚æ­¥ä»£ç äº§ç”Ÿçš„é”™è¯¯ã€‚èƒ½æ•è·  asyncÂ·Â·Â·await æ‰€æ¥ç®¡çš„å¼‚æ­¥ä»£ç ã€‚

``` javascript
function error() {
    try {
        return 2;
    } catch (e) {
        return 1;
    } finally {
        return 0;
    }
}
```

2ï¼‰window.error

``` javascript
// è¯­æ³•
// messageï¼šé”™è¯¯ä¿¡æ¯çš„å­—ç¬¦ä¸² string
// sourceï¼šå‡ºé”™ js æ–‡ä»¶çš„ url string
// linenoï¼šå‡ºé”™ä»£ç çš„è¡Œå· number
// colnoï¼šå‡ºé”™ä»£ç çš„åˆ—å· number
// errorï¼šé”™è¯¯å¯¹è±¡ object
window.onerror = function(message, source, lineno, colno, error) {
    ...
}
```

> ä¸èƒ½æ•è·è¯­æ³•è§£æé”™è¯¯ï¼Œå¼‚æ­¥ä»£ç é”™è¯¯ï¼Œé™æ€èµ„æºçš„åŠ è½½å¤±è´¥ï¼›
> èƒ½æ•è·æ‰§è¡Œ setTimeout å’Œ setInterval ä¸­çš„ä»£ç ï¼›
> èƒ½æ•è·å‘ç”Ÿåœ¨äº‹ä»¶å¤„ç†å‡½æ•°é‡Œé¢çš„é”™è¯¯ï¼ŒåŒ…æ‹¬è¯­æ³•é”™è¯¯ã€‚

3ï¼‰window.addEventListener('error', function() {}, false) å’Œ element.onerror

> èƒ½å¤Ÿæ•è·åˆ°é™¤äº† iframe ä¹‹å¤–çš„æ‰€æœ‰èµ„æºåŠ è½½é”™è¯¯çš„é—®é¢˜ã€‚

4ï¼‰Promise Catch å’Œ window.addEventListener("unhandledrejection", ()=> {})

> Promise Catch è‡ªå¸¦çš„ catch æ¥æ•è· promise æ‰€äº§ç”Ÿçš„å¼‚å¸¸ã€‚

``` javascript
var promiseObj = new Promise(executor);

promiseObj
    .then(handleFulfilledA)
    .then(handleFulfilledB)
    .catch(handleRejectedAny)

// window.addEventListener("unhandledrejection",()=> {})
window.addEventListener("unhandledrejection", function(e) {
    console.log('æ•è·åˆ°çš„promiseå¼‚å¸¸:', e);
    e.preventDefault();
});
new Promise((res) => {
    console.log(a)
});
```

### 2. JavaScript å¦‚ä½•å·¥ä½œï¼šå¯¹å¼•æ“ã€è¿è¡Œæ—¶ã€è°ƒç”¨å †æ ˆçš„æ¦‚è¿°

##### 2.1 JavaScript å¼•æ“

> ä½¿ç”¨çš„æ˜¯è°·æ­Œ V8 å¼•æ“ï¼ŒV8 å¼•æ“ä½¿ç”¨åœ¨ Chrome ä»¥åŠ Node ä¸­ã€‚

å¼•æ“ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š

* å†…å­˜å †ï¼šå†…å­˜åˆ†é…å‘ç”Ÿçš„åœ°æ–¹ï¼›
* è°ƒç”¨æ ˆï¼šä»£ç æ‰§è¡Œæ—¶çš„åœ°æ–¹ã€‚

##### 2.2 è°ƒç”¨æ ˆ

> å•çº¿ç¨‹è¯­è¨€ï¼Œåªæœ‰ä¸€ä¸ªè°ƒç”¨æ ˆï¼ŒåŒä¸€æ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚

##### 2.3 JavaScript çš„äº‹ä»¶å¾ªç¯

> æ‰§è¡Œåœ¨å•çº¿ç¨‹ä¸­çš„ä»»åŠ¡åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ã€‚æ˜¯ JavaScript çš„æ‰§è¡Œæœºåˆ¶ã€‚

äº‹ä»¶å¾ªç¯è¿‡ç¨‹ï¼š

* åŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡åˆ†åˆ«è¿›å…¥ä¸åŒçš„æ‰§è¡Œåœºæ‰€ï¼ŒåŒæ­¥ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼›å¼‚æ­¥ä»»åŠ¡è¿›å…¥Event Tableï¼Œå¹¶æ³¨å†Œå‡½æ•°ï¼›
* å½“æŒ‡å®šçš„äº‹æƒ…å®Œæˆæ—¶ï¼ŒEvent Table ä¼šå°†å‡½æ•°ç§»å…¥ Event Queueï¼ˆäº‹ä»¶é˜Ÿåˆ—ï¼‰ï¼›
* ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå» Event Queue è¯»å–å¯¹åº”çš„å‡½æ•°ï¼Œè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œï¼›
* ä¸Šè¿°è¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ EVent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚

##### 2.4 setTimeout å‡½æ•°

> ç»è¿‡æŒ‡å®šçš„æ—¶é—´ï¼ŒæŠŠè¦æ‰§è¡Œçš„ä»»åŠ¡åŠ å…¥åˆ° Event Queue ä¸­ï¼Œåˆå› ä¸ºå•çº¿ç¨‹ä»»åŠ¡æ˜¯ä¸€ä¸ªä¸ªæ‰§è¡Œï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡éœ€è¦çš„æ—¶é—´å¤ªä¹…ï¼Œé‚£ä¹ˆå°±åªèƒ½ç­‰ç€ï¼Œç­‰æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰ä»ä»»åŠ¡é˜Ÿåˆ—åˆ°ä¸»çº¿ç¨‹ã€‚

setTimeout(fn, 0) çš„å«ä¹‰æ˜¯ï¼Œä¸æ˜¯ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æŒ‡å®šæŸä¸ªä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æœ€æ—©å¯å¾—çš„ç©ºé—²æ—¶é—´æ‰§è¡Œï¼Œåªè¦ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆå†…çš„åŒæ­¥ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ ˆä¸ºç©ºå°±ç«‹é©¬æ‰§è¡Œã€‚

> æ³¨ï¼šå³ä½¿ä¸»çº¿ç¨‹æ˜¯ç©ºçš„ï¼Œ0ms å®é™…ä¸Šä¹Ÿæ˜¯è¾¾ä¸åˆ°çš„ï¼Œæ ¹æ® HTML çš„æ ‡å‡†ï¼Œæœ€ä½æ˜¯ 4msã€‚

##### 2.5 setInterval å‡½æ•°

> ä¸ setTimeout ä¸€æ ·ï¼Œåªæ˜¯æ˜¯å¾ªç¯æ‰§è¡Œã€‚

##### 2.6 å¾®ä»»åŠ¡ä¸å®ä»»åŠ¡

* éƒ½æ˜¯å¼‚æ­¥ä»»åŠ¡ã€‚
* macro-taskï¼ˆå®ä»»åŠ¡ï¼‰ï¼šåŒ…æ‹¬æ•´ä½“ä»£ç  scriptã€setTimeoutã€setIntervalã€setImmediateï¼›
* micro-taskï¼ˆå¾®ä»»åŠ¡ï¼‰ï¼šPromiseã€process.nextTickã€‚
* åŒºåˆ«ï¼šæ‰§è¡Œé¡ºåºä¸åŒï¼šå¾®ä»»åŠ¡åœ¨å®ä»»åŠ¡ä¹‹å‰æ‰§è¡Œã€‚

> ä¸åŒç±»å‹çš„ä»»åŠ¡ä¼šè¿›å…¥å¯¹åº”çš„äº‹ä»¶é˜Ÿåˆ—ã€‚
 
äº‹ä»¶å¾ªç¯çš„é¡ºåºï¼Œå†³å®š js ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚è¿›å…¥æ•´ä½“ä»£ç ï¼ˆå®ä»»åŠ¡ï¼‰åï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ã€‚æ¥ç€æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ï¼Œç„¶åå†æ¬¡ä»å®ä»»åŠ¡å¼€å§‹ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚

``` javascript
setTimeout(function() {
    console.log('setTimeout');
})

new Promise(function(resolve) {
    resolve();
    console.log('promise');
}).then(function() {
    console.log('then');
})

console.log('console');
// promise
// console
// then
// setTimeout
```

* ä»£ç ä½œä¸ºå®ä»»åŠ¡ï¼Œè¿›å…¥ä¸»çº¿ç¨‹ï¼›
* å…ˆé‡åˆ° setTimeoutï¼Œå°†å…¶å›è°ƒå‡½æ•°æ³¨å†Œååˆ†å‘åˆ°å®ä»»åŠ¡ä»»åŠ¡é˜Ÿåˆ—ï¼›
* æ¥ç€é‡åˆ° Promiseï¼Œ new Promise ç«‹å³æ‰§è¡Œï¼Œthen å‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡äº‹ä»¶é˜Ÿåˆ—ï¼›
* é‡åˆ° console.log() ç«‹å³æ‰§è¡Œï¼›
* è‡³æ­¤ï¼Œæ•´ä½“ä»£ç  script ä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œç„¶åæ‰§è¡Œå¾®ä»»åŠ¡äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ then å‡½æ•°ï¼›
* ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œå¼€å§‹ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ï¼Œä»å®ä»»åŠ¡äº‹ä»¶é˜Ÿåˆ—å¼€å§‹ï¼Œå‘ç° setTimeout å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œç«‹å³æ‰§è¡Œã€‚

> æ€è€ƒé¢˜ï¼ˆç­”æ¡ˆï¼š 1 7 6 8 2 4 3 5 9 11 10 12ï¼‰

``` javascript
console.log('1');

setTimeout(function() {
    console.log('2');
    process.nextTick(function() {
        console.log('3');
    })
    new Promise(function(resolve) {
        console.log('4');
        resolve();
    }).then(function() {
        console.log('5')
    })
})
process.nextTick(function() {
    console.log('6');
})
new Promise(function(resolve) {
    console.log('7');
    resolve();
}).then(function() {
    console.log('8')
})

setTimeout(function() {
    console.log('9');
    process.nextTick(function() {
        console.log('10');
    })
    new Promise(function(resolve) {
        console.log('11');
        resolve();
    }).then(function() {
        console.log('12')
    })
})
```

##### 2.7 æ€»ç»“

> JavaScript æ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ã€‚
> Event Loop æ˜¯ JavaScript çš„æ‰§è¡Œæœºåˆ¶ã€‚

### 3. ES6 è¯­æ³•ä¸­å¸¸é‡å£°æ˜ const çš„å®ç°åŸç†

``` javascript
// const ç‰¹ç‚¹ï¼š
// ä¸´æ—¶æ€§æ­»åŒº
// åœ¨å®šä¹‰çš„æ—¶å€™å®Œæˆåˆå§‹åŒ–
// ä¸èƒ½é‡æ–°å®šä¹‰
// ä¸èƒ½é‡æ–°èµ‹å€¼
// è¯­ä¹‰åŒ–æ ‡è¯†ï¼Œè¡¨ç¤ºå£°æ˜åä¸å¯æ›´æ”¹çš„å˜é‡

// åŸç†ï¼š
// å°† const å£°æ˜çš„å˜é‡ç»‘å®šåœ¨å…¨å±€å¯¹è±¡ä¸Šï¼Œå€ŸåŠ© Object.defineProperty() åŠ«æŒè¯¥å¯¹è±¡ï¼Œé…ç½®ç›¸å…³å±æ€§
// å…³é”®å­—å’Œæ•°å­—ä¸èƒ½ä½œä¸ºå¯¹è±¡å±æ€§

var const_customer = function(param, value) {
    // åœ¨æµè§ˆå™¨ç«¯æµ‹è¯•å…¨å±€å¯¹è±¡ window
    var _gobal = window;
    // å…³é”®å­—åˆ—è¡¨
    var KEY_WORD = ['const', 'let', 'var', 'class', 'return'];
    // æ•°å­—æ­£åˆ™è¡¨è¾¾å¼
    var REG_NUMBER = '^[1-9][0-9]*([.][0-9]+)?$|0';
    var _reg = new RegExp(REG_NUMBER);

    // æ£€æµ‹é”®å€¼æ˜¯å¦å­˜åœ¨ä¸”è¢«æ”¯æŒ
    if (!param || _reg.test(parseFloat(param)) || KEY_WORD.indexOf(param) > -1) {
        throw new Error( `Unexpected token: ${param}` );
    }

    // æ£€æµ‹æ˜¯å¦è¢«å®šä¹‰
    if (_gobal.hasOwnProperty(param)) {
        throw new Error( `${param} had already been declared!` );
    }

    _gobal[param] = value;
    Object.defineProperty(_gobal, param, {
        enumrable: false,
        configurable: false,
        get: function() {
            return value;
        },
        set: {
            function(data) {
                // æ£€æµ‹èµ‹å€¼å¼‚å¸¸
                if (_gobal.hasOwnProperty(param)) {
                    throw new Error( `${param} is read-only!` );
                } else {
                    return value;
                }
            }
        }
    })
}
```

### 4. ä»€ä¹ˆæ˜¯ window å¯¹è±¡ï¼Ÿä»€ä¹ˆæ˜¯ document å¯¹è±¡ï¼Ÿ

> window å¯¹è±¡æ˜¯æŒ‡æµè§ˆå™¨æ‰“å¼€çš„çª—å£ï¼›
> document å¯¹è±¡æ˜¯ document å¯¹è±¡çš„ä¸€ä¸ªåªè¯»å¼•ç”¨ï¼Œwindow å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚

### 5. å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆ

> åŒæ­¥ï¼šè¿ç»­çš„æ‰§è¡Œã€‚
> å¼‚æ­¥ï¼šå°†ä¸€ä¸ªä»»åŠ¡åˆ†æˆä¸¤æ®µï¼Œå…ˆæ‰§è¡Œä¸€æ®µï¼Œç„¶åè½¬ä¸ºæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç­‰åšå¥½äº†å‡†å¤‡ï¼Œå†å›å¤´å‡†å¤‡æ‰§è¡Œç¬¬äºŒæ®µã€‚

##### 5.1 å›è°ƒå‡½æ•°ï¼ˆCallbackï¼‰

> * ä¼˜ç‚¹ï¼šç®€å•ã€å®¹æ˜“ç†è§£å’Œå®ç°ã€‚
> * ç¼ºç‚¹ï¼šä¸åˆ©äºä»£ç çš„ç»´æŠ¤å’Œç†è§£ï¼Œå„ä¸ªéƒ¨åˆ†é«˜åº¦è€¦åˆï¼Œä½¿å¾—ç¨‹åºç»“æ„æ··ä¹±ï¼Œæµç¨‹éš¾ä»¥è¿½è¸ªï¼Œä¸”æ¯ä¸ªä»»åŠ¡åªèƒ½æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå®¹æ˜“å†™å‡ºåœ°ç‹±å›è°ƒã€‚ä¸èƒ½ä½¿ç”¨ tryÂ·Â·Â·catch æ¥æ•è·é”™è¯¯ï¼Œä¸èƒ½ç›´æ¥ returnã€‚

##### 5.2 äº‹ä»¶ç›‘å¬

> å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œä¸å–å†³äºä»£ç çš„é¡ºåºï¼Œè€Œæ˜¯å–å†³äºæŸä¸ªäº‹ä»¶æ˜¯å¦å‘ç”Ÿã€‚

``` javascript
f1.on('done', f2);

function f1() {
    setTimeout(function() {
        f1.trigger('done'); // f1 æ‰§è¡Œå®Œåï¼Œè§¦å‘ done äº‹ä»¶ï¼Œæ‰§è¡Œ f2
    }, 1000);
}
```

##### 5.3 å‘å¸ƒè®¢é˜…

> å‡è®¾å­˜åœ¨ä¸€ä¸ªâ€œä¿¡å·ä¸­å¿ƒâ€ï¼ŒæŸä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œå‘ä¿¡å·ä¸­å¿ƒå‘å¸ƒï¼ˆpublishï¼‰ä¸€ä¸ªä¿¡å·ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥å‘ä¿¡å·ä¸­å¿ƒè®¢é˜…ï¼ˆsubscribeï¼‰è¿™ä¸ªä¿¡å·ï¼Œä»è€ŒçŸ¥é“è‡ªå·±ä»€ä¹ˆæ—¶å€™å¯ä»¥å¼€å§‹æ‰§è¡Œã€‚è¿™ç§æ¨¡å¼å«åšå‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼ˆpublish-subscribe patternï¼‰ï¼Œä¹Ÿå«åšâ€œè§‚å¯Ÿè€…æ¨¡å¼â€ï¼ˆobserver patternï¼‰ã€‚

``` javascript
// jQuery ä¿¡å·ä¸­å¿ƒ
jQuery.subscribe('done', f2);

function f1() {
    setTimeout(function() {
        jQuery.publish('done');
    }, 1000);
}

// å–æ¶ˆè®¢é˜…
jquery.unsubscribe('done', f2);
```

##### 5.4 Promise

###### 5.4.1 Promise åŸºç¡€

> Promise æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚
> ç‰¹ç‚¹ï¼š
> * å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼šPendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€Fulfilledï¼ˆå·²æˆåŠŸï¼‰ã€Rejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœèƒ½å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ã€‚
> * ä¸€æ—¦çŠ¶æ€æ”¹å˜å°±ä¸ä¼šå†å˜ã€‚ä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚

``` javascript
// resolve reject æ˜¯ä¸¤ä¸ªå‡½æ•°
// resolve å‡½æ•°çš„ä½œç”¨æ˜¯å°† Promise çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€œå˜æˆâ€œæˆåŠŸâ€ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚
// reject å‡½æ•°çš„ä½œç”¨æ˜¯å°† Promise çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜æˆâ€œå¤±è´¥â€ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚
var promise1 = new Promise(function(resolve, reject) {
    // if(/* success */) {
    //     resolve(value);
    // }else {
    //     reject(value)
    // }
});

// Promise å®ä¾‹ç”Ÿæˆä¹‹åï¼Œå¯ä»¥é€šè¿‡ then æ–¹æ³•æŒ‡å®š Resolved çŠ¶æ€å’Œ Rejected çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚
promise1.then(function(value) {
    // success
}, function(value) {
    // failure
});

// ä¾‹å­ ğŸŒ°
var promise2 = new Promise(function(resolve) {
    console.log('Promise');
    resolve('resolve function');
})

promise2.then(function(value) {
    console.log('then ' + `${value}` )
})

console.log('hi')

// Promise
// hi
// then resolve function
// Promise åœ¨åˆ›å»ºä¹‹åå°±ä¼šç«‹å³æ‰§è¡Œï¼Œé¦–å…ˆè¾“å‡ºçš„æ˜¯ Promiseï¼Œç„¶å then æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°å°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰æ‰§è¡Œï¼Œæ‰€ä»¥æœ€åæ‰§è¡Œã€‚
```

###### 5.4.2 Promise.prototype.then()

> ä½œç”¨ï¼šä¸º Promise å®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚
> è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œä¸æ˜¯åŸæ¥çš„é‚£ä¸ª Promise å®ä¾‹ã€‚

```javascript
// then æ–¹æ³•ä¾æ¬¡æŒ‡å®šäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆä¹‹åï¼Œä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ã€‚

getJSON("/post/1.json").then(
    post => console.log(post.commentURL);
).then(
    comments => console.log("Resolved: ", comments);
    error => console.log("Rejected: ", error)
)
``` 

###### 5.4.3 Promise.prototype.catch()

> ä½œç”¨ï¼šç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚æ˜¯ .then(null, rejection) çš„åˆ«åã€‚then æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°å¦‚æœåœ¨è¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢« catch æ–¹æ³•æ•è·ã€‚

```javascript
getJSON('/posts.json').then(function(posts) {
    // ...
}).catch(function(error) {
    // å¤„ç† getJSON å’Œå‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯
    console.log('å‘ç”Ÿé”™è¯¯', error)
})

// å»ºè®®ä½¿ç”¨ catch æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç¬¬äºŒä¸ª then æ–¹æ³•ï¼Œå› ä¸ºå¯ä»¥æ•è·åˆ°ä¸Šä¸€ä¸ª then æ–¹æ³•ä¸­å‡ºç°çš„é”™è¯¯ã€‚
var promise = new Promise(resolve, rejected) {};
promise.then(function(data) {
    //success
}).catch(function(error) {
    console.log(error)
})
``` 

###### 5.4.4 Promise.all()

> ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚

```javascript
// Promise.all æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œp1, p2, p3 éƒ½æ˜¯ Promise å¯¹è±¡çš„å®ä¾‹ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„ Promise.resolve æ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†
// p çš„çŠ¶æ€åˆ†ä¸¤ç§æƒ…å†µï¼š
// 1 p1, p2, p3 çš„çŠ¶æ€éƒ½å˜ä¸º Fulfilled æ—¶ï¼Œp çš„çŠ¶æ€æ‰å˜ä¸º Fulfilled ï¼Œæ­¤æ—¶ p1, p2, p3 çš„è¿”å›å€¼ä½œä¸ºä¸€ä¸ªæ•°ç»„ä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°ã€‚
// 2 p1, p2, p3 çš„çŠ¶æ€åªè¦æœ‰ä¸€ä¸ªè¢« Rejectedï¼Œåˆ™ p çš„çŠ¶æ€å°±å˜ä¸º Rejectedï¼Œæ­¤æ—¶ä¼šå°†ç¬¬ä¸€ä¸ªè¢« Rejected çš„å®ä¾‹çš„è¿”å›å€¼ä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°ã€‚

var p = Promise.all([p1, p2, p3]);

var promises = [2, 3, 5, 7].map(function(id) {
    return getJSON('/post' + id + '.json');
});

Promise.all(promises).then(function(posts) {
    // ...
}).catch(function(err) {
    // ...
});


// å®ç°

// 1.
// æ ¸å¿ƒæ€è·¯
// â‘  æ¥æ”¶ä¸€ä¸ª Promise å®ä¾‹çš„æ•°ç»„æˆ–å…·æœ‰ Iterator æ¥å£çš„å¯¹è±¡ä½œä¸ºå‚æ•°
// â‘¡ è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡ï¼Œ
// â‘¢ éå†ä¼ å…¥çš„å‚æ•°ï¼Œç”¨Promise.resolve()å°†å‚æ•°"åŒ…ä¸€å±‚"ï¼Œä½¿å…¶å˜æˆä¸€ä¸ªpromiseå¯¹è±¡
// â‘£ å‚æ•°æ‰€æœ‰å›è°ƒæˆåŠŸæ‰æ˜¯æˆåŠŸï¼Œè¿”å›å€¼æ•°ç»„ä¸å‚æ•°é¡ºåºä¸€è‡´
// â‘¤ å‚æ•°æ•°ç»„å…¶ä¸­ä¸€ä¸ªå¤±è´¥ï¼Œåˆ™è§¦å‘å¤±è´¥çŠ¶æ€ï¼Œç¬¬ä¸€ä¸ªè§¦å‘å¤±è´¥çš„ Promise é”™è¯¯ä¿¡æ¯ä½œä¸º Promise.all çš„é”™è¯¯ä¿¡æ¯ã€‚
function promiseAll(promises) {
  return new Promise(function(resolve, reject) {
    if(!Array.isArray(promises)){
        throw new TypeError(`argument must be a array`)
    }
    var resolvedCounter = 0;
    var promiseNum = promises.length;
    var resolvedResult = [];
    for (let i = 0; i < promiseNum; i++) {
      Promise.resolve(promises[i]).then(value => {
        resolvedCounter++;
        resolvedResult[i] = value;
        if (resolvedCounter == promiseNum) {
            return resolve(resolvedResult)
          }
      }, error => {
        return reject(error)
      })
    }
  })
}

// 2.
// * Promise.all
// * @description å½“è¿™ä¸ªæ•°ç»„é‡Œçš„æ‰€æœ‰promiseå¯¹è±¡å…¨éƒ¨å˜ä¸ºresolveçŠ¶æ€çš„æ—¶å€™ï¼Œæ‰ä¼šresolve, å½“æœ‰ä¸€ä¸ªpromiseå¯¹è±¡å˜ä¸ºrejectçŠ¶æ€æ—¶ï¼Œå°±ä¸å†æ‰§è¡Œç›´æ¥ reject
// * @param {*} values promiseå¯¹è±¡ç»„æˆçš„æ•°ç»„ä½œä¸ºå‚æ•°

Promise.prototype.all = (values) => {
  return new Promise((resolve,reject) => {
      let resultArr = [];
      let count = 0;
      let resultByKey = (value,index) => {
           resultArr[index] = value;
           if(++count === values.length){
                resolve(resultArr);
           }
      }
      values.forEach((promise, index) => {
         promise.then((value)=>{
            resultByKey(value, index);
         },reject)
      })
  })
}
``` 

###### 5.4.5 Promise.race()

> ä¹Ÿæ˜¯å°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚
> åªè¦å¤šä¸ªå®ä¾‹ä¸­çš„å…¶ä¸­ä¸€ä¸ªç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œåˆ™ p çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚

###### 5.4.6 Promise.resolve()

> å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ã€‚

```javascript
Promise.resolve('foo');
//  ç­‰ä»·äº
new Promise(resolve => resolve('foo'));

// å…¶å‚æ•°åˆ†ä¸º 4 ç§æƒ…å†µï¼š
// 1 å‚æ•°æ˜¯ä¸€ä¸ª Promise å®ä¾‹ï¼Œåˆ™ä¸åšä»»ä½•ä¿®æ”¹ï¼›

// 2 å‚æ•°æ˜¯ä¸€ä¸ª thenable å¯¹è±¡ï¼ˆæŒ‡å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡ï¼‰ã€‚
let thenable = {
    then: function(resolve, rejected) {
        resolve(42);
    }
};
// å°†å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ï¼Œç„¶åç«‹å³æ‰§è¡Œ thenable å¯¹è±¡çš„ then æ–¹æ³•ã€‚
let p1 = Promise.resolve(thenable);
p1.then(function(value) {
    console.log(value)
})

// 3 å‚æ•°ä¸æ˜¯å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡æˆ–è€…æ ¹æœ¬ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º resolvedã€‚

// 4 ä¸å¸¦ä»»ä½•å‚æ•°
``` 

###### 5.4.7 Promise.reject()

###### 5.4.8 Promise.done()

> æ€»æ˜¯åœ¨å›è°ƒé“¾çš„å°¾ç«¯ï¼Œä¿è¯æŠ›å‡ºä»»ä½•å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚

```javascript
asyncFunc()
.then(f1)
.catch(r1)
.then(f2)
.done();

// å®ç°åŸç†
Promise.prototype.done = function(onFulfilled, onRejected) {
    this.then(onFulfilled, onRejected)
    .catch(function(reason) {
        // æŠ›å‡ºä¸€ä¸ªå…¨å±€é”™è¯¯
        setTimeout(() => {throw reason}, 0);
    })
}
``` 

###### 5.4.9 Promise.finally()

###### 5.4.10 åº”ç”¨

```javascript
// åŠ è½½å›¾ç‰‡ï¼Œä¸€æ—¦å®ŒæˆåŠ è½½ï¼ŒPromise çš„çŠ¶æ€å°±å‘ç”Ÿå˜åŒ–ã€‚
const preloadImage = function(path) {
    return new Promise(resolve, reject) {
        var image = new Image();
        image.onload = resolve;
        image.onerror = reject;
        image.src = path;
    }
}
``` 

###### 5.4.11 è‡ªå·±å®ç°ä¸€ä¸ª Promise

```javascript
function myPromise(constructor){
    let self = this;
    self.status = "pending" //å®šä¹‰çŠ¶æ€æ”¹å˜å‰çš„åˆå§‹çŠ¶æ€
    self.value = undefined;//å®šä¹‰çŠ¶æ€ä¸ºresolvedçš„æ—¶å€™çš„çŠ¶æ€
    self.reason = undefined;//å®šä¹‰çŠ¶æ€ä¸ºrejectedçš„æ—¶å€™çš„çŠ¶æ€
    function resolve(value){
        //ä¸¤ä¸ª==="pending"ï¼Œä¿è¯äº†çŠ¶æ€çš„æ”¹å˜æ˜¯ä¸å¯é€†çš„
       if(self.status === "pending"){
          self.value = value;
          self.status = "resolved";
       }
    }
    function reject(reason){
        //ä¸¤ä¸ª==="pending"ï¼Œä¿è¯äº†çŠ¶æ€çš„æ”¹å˜æ˜¯ä¸å¯é€†çš„
       if(self.status === "pending"){
          self.reason = reason;
          self.status = "rejected";
       }
    }
    //æ•è·æ„é€ å¼‚å¸¸
    try{
       constructor(resolve, reject);
    }catch(e){
       reject(e);
    }
}

// å®šä¹‰é“¾å¼è°ƒç”¨çš„thenæ–¹æ³•
myPromise.prototype.then = function(onFullfilled, onRejected){
   let self = this;
   switch(self.status){
      case "resolved":
        onFullfilled(self.value);
        break;
      case "rejected":
        onRejected(self.reason);
        break;
      default:
   }
}
``` 

##### 5.6 Generator å‡½æ•°

> ES6 æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆã€‚æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¯ä»¥æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œã€‚

> * è¯­æ³•ä¸Šï¼Œå¯ä»¥ç†è§£æˆä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…å¤šä¸ªå†…éƒ¨çŠ¶æ€ï¼›

> * æ‰§è¡Œ Generator å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚è¿”å›çš„éå†å™¨å¯¹è±¡å¯ä»¥ä¾æ¬¡éå† Generator å‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ï¼›
> * ä½¿ç”¨ yield è¯­å¥å®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ï¼›

###### 5.6.1 yield è¡¨è¾¾å¼

> yield è¯­å¥æ˜¯æš‚åœæ ‡å¿—ï¼Œåœ¨æ­¤å¤„æš‚åœï¼Œåªä¼šåœ¨ next æ–¹æ³•å°†æŒ‡é’ˆç§»åˆ°è¿™ä¸€å¥æ—¶æ‰æ±‚å€¼ï¼Œä¸”è¿”å›çš„æ˜¯ yield åè¡¨è¾¾å¼çš„ç»“æœã€‚

###### 5.6.1 next æ–¹æ³•çš„å‚æ•°

> yield è¯­å¥æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å› undefinedã€‚next æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«å½“ä½œä¸Šä¸€æ¡ yield è¯­å¥çš„è¿”å›å€¼ã€‚

```javascript
function *foo(x) {
    var y = yield (x + 2);
    var z = 3 * (yield(y - 1));
    return (x + y + z);
}
var a = foo(5);

console.log(a.next()); // {value: 7, done: false}
console.log(a.next(12)); // {value: 11, done: false}
// x = 5, y = 12, z = 24
console.log(a.next(8)); // {value: 41, done: true}
```

###### 5.6.1 yield è¡¨è¾¾å¼

##### 5.7 async / await

> æ˜¯ Generator çš„è¯­æ³•ç³–ã€‚

> async è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawait è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚async å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œæ˜¯ç”±å¤šä¸ªå¼‚æ­¥æ“ä½œåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ await å‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³–ã€‚

```javascript
function timeout(ms) {
    return new Promise((resolve) => {
        setTimeout(resolve, ms);
    })
}

async function asyncPrint(value, ms) {
    await timeout(ms);
    console.log(value);
}
asyncPrint('hello', 5000);
```

### 6. èŠ‚æµä¸é˜²æŠ–

##### 6.1 èŠ‚æµï¼ˆthrottleï¼‰

> å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ä¸€å®šæ—¶é—´æ®µå†…åªè°ƒç”¨ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ã€‚

```javascript
function throttle(fun, delay) {
    let last, deferTimer;
    return function (args) {
        let that = this
        let _args = arguments
        let now = +new Date()
        if (last && now < last + delay) {
            clearTimeout(deferTimer)
            deferTimer = setTimeout(function () {
                last = now
                fun.apply(that, _args)
            }, delay)
        }else {
            last = now
            fun.apply(that,_args)
        }
    }
}
```

##### 6.2 é˜²æŠ–ï¼ˆdebounceï¼‰

> å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´å†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼›å¦‚æœåœ¨è®¾å®šçš„æ—¶é—´å†…åˆä¸€æ¬¡è§¦å‘äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹è®¡æ—¶ã€‚

> åœºæ™¯ï¼š
> * æŒ‰é’®æäº¤åœºæ™¯
> * æœç´¢æ¡†è”æƒ³åœºæ™¯

```javascript
function debounce(func, delay) {
    let timeout;
    return function(arguments) {
        const that = this;
        const args = arguments;
        clearTimeout(timeout);
        timeout = setTimeout(function() {
            func.call(that, args)
        }, delay);
    }
}
``` 

##### 6.3 é˜²æŠ–ä¸èŠ‚æµçš„åŒºåˆ«

> é˜²æŠ–æ˜¯è§¦å‘å¤šæ¬¡åªæ‰§è¡Œæœ€åä¸€æ¬¡ï¼›èŠ‚æµæ˜¯ä¸ç®¡è§¦å‘å¤šå°‘æ¬¡ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚

### 7. for...in å’Œ for...of

##### 7.1 åŒºåˆ«

* for...in å¾ªç¯ä¸»è¦æ˜¯ä¸ºäº†å¯¹è±¡è€Œè®¾è®¡çš„ï¼Œä¸é€‚åˆéå†æ•°ç»„ã€‚for...in å¾ªç¯è¯»å–é”®åï¼›for...of å¾ªç¯è¯»å–é”®å€¼ã€‚æƒ³é€šè¿‡ for...of æ¥è·å–é”®åæˆ–è€…é”®å€¼å¯¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ keys() å’Œ entries() æ–¹æ³•ã€‚

``` javascript
var arr7 = ['a', 'for', 'in', 'of'];
for (var prop in arr7) {
    console.log('for...in å¾ªç¯è¯»å–é”®åï¼š', prop);
}
for (var prop of arr7) {
    console.log('for...of å¾ªç¯è¯»å–é”®å€¼ï¼š', prop);
}

// keys() values() entries() ä¸‰ä¸ªæ–¹æ³•ç”¨äºéå†æ•°ç»„ï¼Œå‡è¿”å›éå†å™¨å¯¹è±¡
// keys() æ˜¯å¯¹é”®åçš„éå†
for (let prop of arr7.keys()) {
    console.log(prop)
}
// values() æ˜¯å¯¹é”®å€¼çš„éå†
for (let prop of arr7.values()) {
    console.log(prop)
}
// entries() æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„
for (let prop of arr7.entries()) {
    //(2)Â [0, "a"]
    //(2)Â [1, "for"]
    //(2)Â [2, "in"]
    //(2)Â [3, "of"]
    console.log(prop)
}
```

* for...of å¾ªç¯è°ƒç”¨éå†å™¨æ¥å£ï¼Œæ•°ç»„çš„éå†å™¨æ¥å£åªè¿”å›å…·æœ‰æ•°å­—ç´¢å¼•çš„å±æ€§ã€‚

``` javascript
var arr1 = ['w', 'h', 'a'];
arr1.foo = 't';
for(let prop of arr1) {
    // w
    // h
    // a
    console.log(prop)
} 
```

* ä½¿ç”¨ for...of éå†å¯¹è±¡ä¼šå‡ºé”™ã€‚å› ä¸º for...of å¾ªç¯æœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨ Symbol.iterator æ¥å£äº§ç”Ÿçš„éå†å™¨ã€‚æ•°ç»„åŸç”Ÿæ˜¯å…·å¤‡ iterator æ¥å£çš„ã€‚

```javascript
var arr = [];
var obj = {
    'name': 'Champion',
    'sex': 'female',
    'address': 'Beijing'
}

obj[Symbol.iterator] = arr1[Symbol.iterator].bind(arr);

for(let prop of obj) {
    console.log(prop)
}
```

### 8. å†™å‡ºè¾“å‡ºå†…å®¹

```javascript
let object = {a:0};
function fun(obj) {
    obj.a=1;
    obj={a:2};
    obj.b=2;
}
fun(object);
console.log(object);
// {a: 1}

let object = 0;
function fun(obj) {
    obj= 1
}
fun(object);
console.log(object);
// 0

let object = {a:0};
function fun() {
    object.a=1;
    object={a:2};
    object.b=2;
}
fun();
console.log(object);
// {a: 2, b: 2}

var nickname = "LiLei";
//C
function Person(name){
  this.nickname = name;
  //A
  this.sayHi = function() {
    console.log(this.nickname);
    //B
    setTimeout(()=>{
      console.log(this.nickname);
    }, 1000);
  }
}
var Male = {
  nickname: 'xiaofang',
  sayHi: () => {
    console.log(this.nickname);
  }
}
var person = new (Person.bind(Male, 'XiaoHong'));
person.sayHi(); 
// XiaoHong
// XiaoHong
```

### æ€§èƒ½ä¼˜åŒ–

åˆ†ç±»ï¼š

* ç«™åœ¨ç”¨æˆ·è§†è§’çš„ä¸»è§‚çš„å¯æ„ŸçŸ¥çš„æ€§èƒ½ï¼›

* ç«™åœ¨å¼€å‘è€…è§†è§’çš„å®¢è§‚å¯åº¦é‡çš„æ€§èƒ½ï¼›

##### 1 æ„å»ºä¼˜åŒ–

* 

##### 2 ç½‘ç»œèµ„æºä¼˜åŒ–

* 

##### 3 æ„ŸçŸ¥æ€§èƒ½ä¼˜åŒ–

* loading åŠ è½½ / éª¨æ¶å±
